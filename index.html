<!DOCTYPE html>
<html>
	<head>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
		
		<title>Geemails Simulation</title>
    <script>
      $(document).ready(function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser			
			//show initial e-mail count
			var inboxCount = 10;
			$("#inboxCount").text(inboxCount);
			//new message count - to initially hide new message body
			var newMessageCount = 0;
			
			//hide body of initial 10 messages and have toggle	
			$(".hidden").hide();
			$(".row").click(function(){
				$(this).find(".hidden").toggle();
			});
			
			//populate initial 10 messages
			//possibly could have used a for loop
			//first message
			$("#1date").text(window.geemails[0].date);
			$("#1sender").text(window.geemails[0].sender);
			$("#1subject").text(window.geemails[0].subject);
			$("#1body").text(window.geemails[0].body);
			//second message
			$("#2date").text(window.geemails[1].date);
			$("#2sender").text(window.geemails[1].sender);
			$("#2subject").text(window.geemails[1].subject);
			$("#2body").text(window.geemails[1].body);	
			//third message
			$("#3date").text(window.geemails[2].date);
			$("#3sender").text(window.geemails[2].sender);
			$("#3subject").text(window.geemails[2].subject);
			$("#3body").text(window.geemails[2].body);
			//fourth message
			$("#4date").text(window.geemails[3].date);
			$("#4sender").text(window.geemails[3].sender);
			$("#4subject").text(window.geemails[3].subject);
			$("#4body").text(window.geemails[3].body);
			//fifth message
			$("#5date").text(window.geemails[4].date);
			$("#5sender").text(window.geemails[4].sender);
			$("#5subject").text(window.geemails[4].subject);
			$("#5body").text(window.geemails[4].body);
			//sixth message
			$("#6date").text(window.geemails[5].date);
			$("#6sender").text(window.geemails[5].sender);
			$("#6subject").text(window.geemails[5].subject);
			$("#6body").text(window.geemails[5].body);
			//seventh message
			$("#7date").text(window.geemails[6].date);
			$("#7sender").text(window.geemails[6].sender);
			$("#7subject").text(window.geemails[6].subject);
			$("#7body").text(window.geemails[6].body);
			//eighth message
			$("#8date").text(window.geemails[7].date);
			$("#8sender").text(window.geemails[7].sender);
			$("#8subject").text(window.geemails[7].subject);
			$("#8body").text(window.geemails[7].body);
			//ninth message
			$("#9date").text(window.geemails[8].date);
			$("#9sender").text(window.geemails[8].sender);
			$("#9subject").text(window.geemails[8].subject);
			$("#9body").text(window.geemails[8].body);
			//tenth message
			$("#10date").text(window.geemails[9].date);
			$("#10sender").text(window.geemails[9].sender);
			$("#10subject").text(window.geemails[9].subject);
			$("#10body").text(window.geemails[9].body);

			//create new messages every 3 seconds & update email count
			setInterval(function(){
				//create new message
				var newMessage = getNewMessage();
				//update new message count to initially hide newly created message without hiding all newly created messages
				newMessageCount = newMessageCount + 1;
				//create new row with class for clicking and specific body id for toggling
				$("#emails").append('<tr class="newRow"><td>'+newMessage.date+'</td><td>'+newMessage.sender+'</td><td>'+newMessage.subject+'</td><td id="hidden'+newMessageCount+'" class="newHidden">'+newMessage.body+'</td></tr>');	
				//update email count
				window.geemails.push(newMessage);
				inboxCount = inboxCount + 1;
				$("#inboxCount").text(inboxCount);
				//initially hide newly created message
				$('#hidden'+newMessageCount).hide();				
			}, 3000);

			//toggle of newly created dynamic rows after .ready occurs
			$("#emails").on('click','tr',function(){
				$(this).find(".newHidden").toggle();
			});
			
	  //end of ready function
      });
    </script>
	</head>
	
	<body>
		<div class="container" id="main">
			<!--inbox count-->
			<h3>Inbox Count</h3>
			<p id="inboxCount"></p>
			
			<!--emails-->
			<table id="emails" style="width:100%">
			<tr>
				<th>Date</th>
				<th>Sender</th>
				<th>Subject</th>
			</tr>
			<tr class="row">
				<td id="1date"></td>
				<td id="1sender"></td>
				<td id="1subject"></td>
				<td id="1body" class="hidden"></td>
			</tr>
			<tr class="row">
				<td id="2date"></td>
				<td id="2sender"></td>
				<td id="2subject"></td>
				<td id="2body" class="hidden"></td>
			</tr>
			<tr class="row">
				<td id="3date"></td>
				<td id="3sender"></td>
				<td id="3subject"></td>
				<td id="3body" class="hidden"></td>
			</tr>
			<tr class="row">
				<td id="4date"></td>
				<td id="4sender"></td>
				<td id="4subject"></td>
				<td id="4body" class="hidden"></td>
			</tr>
			<tr class="row">
				<td id="5date"></td>
				<td id="5sender"></td>
				<td id="5subject"></td>
				<td id="5body" class="hidden"></td>
			</tr>
			<tr class="row">
				<td id="6date"></td>
				<td id="6sender"></td>
				<td id="6subject"></td>
				<td id="6body" class="hidden"></td>
			</tr>
			<tr class="row">
				<td id="7date"></td>
				<td id="7sender"></td>
				<td id="7subject"></td>
				<td id="7body" class="hidden"></td>
			</tr>
			<tr class="row">
				<td id="8date"></td>
				<td id="8sender"></td>
				<td id="8subject"></td>
				<td id="8body" class="hidden"></td>
			</tr>
			<tr class="row">
				<td id="9date"></td>
				<td id="9sender"></td>
				<td id="9subject"></td>
				<td id="9body" class="hidden"></td>
			</tr>
			<tr class="row">
				<td id="10date"></td>
				<td id="10sender"></td>
				<td id="10subject"></td>
				<td id="10body" class="hidden"></td>
			</tr>

			</table>
		</div>
	</body>
</html>